# Установка бота и клиента для запуска смешнявок на пк с OS на базе Linux через Telegram-бота

**Требуется:**
- ПК
- Установленный Python, добавленный в PATH

## 1. Установка бота и клиента

### Пинкод и задержка клиента
1. Пинкод защищает от DDoS-атак. Он установлен по умолчанию на `1`.
2. Оптимальная задержка запросов к API Google — 3 секунды.
   - **Изменение задержки:** измените значение после `delay =`.
   - **Изменение пинкода:** измените значение после `_pin=`.
   - Пинкод должен быть целым числом.

### Токен бота
1. Создайте бота через Telegram-бота [@BotFather](https://telegram.me/BotFather):
   - Нажмите `/start`, затем `/newbot`.
   - Укажите имя и username, оканчивающийся на `_bot`.
   - Сохраните полученный токен.

### ID таблицы и таблица
1. Создайте таблицу в Google Sheets и скопируйте её ссылку, выбрав права на изменение "Все, у кого есть ссылка".
   - ID таблицы — это часть ссылки между `d/` и `/edit`.

### Google API
1. На сайте [cloud.google.com](https://cloud.google.com) создайте новый проект.
2. Включите API Google Sheets:
   - Найдите и включите "Google Sheets API".
3. Создайте учётные записи сервиса для клиента и сервера.
4. Добавьте их email в редакторы таблицы.
5. Скачайте JSON-файлы ключей для обеих учётных записей.

## 2. Сборка и установка

### Подготовка
1. В одну папку поместите два JSON-файла, ID таблицы и токен бота.

### Файлы клиента
1. Скачайте и распакуйте репозиторий с GitHub.
2. В папку `client` добавьте JSON клиента.
3. В `main.py`:
   - `account_file` — путь к JSON.
   - `spreadsheet_id` — ID таблицы.

### Файлы бота
1. В папку `server` добавьте JSON сервера.
2. В `main.py`:
   - `account_file` — путь к JSON.
   - `spreadsheet_id` — ID таблицы.
   - `_pin` — пинкод.
   - `token` — токен бота.
     
## 3. Установка библитотек и запуск 
### Бот
1. Скопируйте файлы из папки `server` на пк.
2. Выполните команду:
   ```sh
   pip install -r requirements_bot.txt
   ```
3. Запустите main.py через терминал командой:
   ```sh
   python main.py
   ```
4. Проверьте работу через Telegram, отправив команду `/start`.
   
### Клиент
1. Скопируйте файлы из папки `client` на доску.
2. Для клиента выполните команду:
   ```sh
   pip3 install -r requirements_client.txt
   ```
3. Запустите main.py через терминал командой:
   ```sh
   python3 main.py
   ```
Важно: Если Хост бота или доска выключатся, бот и скрипты прекратят работу.
